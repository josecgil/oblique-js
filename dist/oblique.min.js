(function(){var ArrayParam,DOMProcessor,DataModelVariable,Directive,DirectiveCollection,Element,EmptyParam,Memory,Oblique,ObliqueError,Param,ParamCollection,ParamParser,RangeParam,SingleParam,Template,TemplateFactory,TimedDOMObserver,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};this.ObliqueNS=this.ObliqueNS||{},Directive=function(){function Directive(name1,callback1,isGlobal){this.name=name1,this.callback=callback1,this.isGlobal=null!=isGlobal?isGlobal:!1,this._throwErrorIfParamsAreNotValid(this.name,this.callback)}return Directive.prototype._isAFunction=function(memberToTest){return"function"==typeof memberToTest},Directive.prototype._throwErrorIfParamsAreNotValid=function(name,callback){if(!name||"string"!=typeof name)throw new ObliqueNS.Error("Directive name must be an string");if(!this._isAFunction(callback))throw new ObliqueNS.Error("Directive must be called with a 'Constructor Function/Class' param")},Directive}(),ObliqueNS.Directive=Directive,this.ObliqueNS=this.ObliqueNS||{},DirectiveCollection=function(){function DirectiveCollection(){this._directives={}}return DirectiveCollection.prototype.add=function(directive){return this._directives[directive.name]=directive},DirectiveCollection.prototype.count=function(){var len;return len=0,this.each(function(){return len++}),len},DirectiveCollection.prototype.findByName=function(name){return this._directives[name]},DirectiveCollection.prototype.each=function(callback){var index,key,ref,results,value;index=0,ref=this._directives,results=[];for(key in ref)value=ref[key],callback(value,index),results.push(index++);return results},DirectiveCollection}(),ObliqueNS.DirectiveCollection=DirectiveCollection,this.ObliqueNS=this.ObliqueNS||{},ParamParser=function(){function ParamParser(params,separator){var ch,currentParam,i,isInsideValue,len1;for(null==separator&&(separator="&"),params=params.replace("#","")+separator,this.hashParams=[],currentParam="",isInsideValue=!1,i=0,len1=params.length;len1>i;i++)ch=params[i],("]"===ch||")"===ch)&&(isInsideValue=!1),("["===ch||"("===ch)&&(isInsideValue=!0),ch!==separator||isInsideValue?currentParam+=ch:(this.hashParams.push(currentParam),currentParam="")}return ParamParser}(),ObliqueNS.ParamParser=ParamParser,this.ObliqueNS=this.ObliqueNS||{},ParamParser=ObliqueNS.ParamParser,Param=function(){function Param(name1){if(this.name=name1,!this._isString(this.name))throw new ObliqueNS.Error("Param constructor must be called with first param string")}return Param.prototype._isString=function(value){return"string"==typeof value?!0:!1},Param.containsChar=function(fullStr,char){return-1===fullStr.indexOf(char)?!1:!0},Param.isEnclosedInChars=function(fullStr,charStart,charEnd){return fullStr[0]===charStart?!0:fullStr[fullStr.length-1]===charEnd?!0:!1},Param.stringIsNullOrEmpty=function(value){return void 0===value?!0:0===value.trim().length?!0:!1},Param.parse=function(strHashParam){var hashArray,name,value;return hashArray=new ParamParser(strHashParam,"=").hashParams,name=hashArray[0].trim(),value="",hashArray.length>1&&(value=hashArray[1].trim()),{name:name,value:value}},Param.prototype.getLocationHash=function(){return""},Param.prototype.isEmpty=function(){return!0},Param.prototype.valueIsEqualTo=function(){return!0},Param.prototype.containsValue=function(){return!0},Param.prototype.isInRange=function(){return!0},Param}(),ObliqueNS.Param=Param,this.ObliqueNS=this.ObliqueNS||{},Param=ObliqueNS.Param,ParamParser=ObliqueNS.ParamParser,ArrayParam=function(superClass){function ArrayParam(name1,values){var i,len1,value;if(this.name=name1,ArrayParam.__super__.constructor.call(this,this.name),!this._isArray(values))throw new ObliqueNS.Error("Param constructor must be called with second param array");for(this.values=[],i=0,len1=values.length;len1>i;i++)value=values[i],this.add(value)}return extend(ArrayParam,superClass),ArrayParam.prototype._isArray=function(value){return"[object Array]"===Object.prototype.toString.call(value)?!0:!1},ArrayParam.prototype.add=function(value){if(!this._isString(value))throw new ObliqueNS.Error("Array param must be an string");return this.values.push(value)},ArrayParam.prototype.remove=function(value){var index;return index=this.values.indexOf(value),-1!==index?(this.values.splice(index,1),0===this.count()?this.values=void 0:void 0):void 0},ArrayParam.prototype.isEmpty=function(){return 0===this.count()?!0:!1},ArrayParam.prototype.getLocationHash=function(){var hash,i,len1,ref,value;if(0===this.count())return this.name;for(hash=this.name+"=[",ref=this.values,i=0,len1=ref.length;len1>i;i++)value=ref[i],hash+=value+",";return hash=hash.substr(0,hash.length-1),hash+="]"},ArrayParam.prototype.count=function(){return void 0===this.values?0:0===this.values.length?0:this.values.length},ArrayParam.is=function(strHashParam){var hashParam;return hashParam=Param.parse(strHashParam),Param.isEnclosedInChars(hashParam.value,"[","]")?!0:!1},ArrayParam.createFrom=function(strHashParam){var hashParam,i,len1,trimmedValues,value,values;for(hashParam=Param.parse(strHashParam),value=hashParam.value.replace("[","").replace("]",""),values=value.split(","),trimmedValues=[],i=0,len1=values.length;len1>i;i++)value=values[i],value=value.trim(),void 0!==value&&(value=unescape(value)),Param.stringIsNullOrEmpty(value)||trimmedValues.push(value);return new ArrayParam(hashParam.name,trimmedValues)},ArrayParam.prototype.containsValue=function(value){return this.isEmpty()?!1:indexOf.call(this.values,value)>=0?!0:!1},ArrayParam}(ObliqueNS.Param),ObliqueNS.ArrayParam=ArrayParam,this.ObliqueNS=this.ObliqueNS||{},EmptyParam=function(superClass){function EmptyParam(){EmptyParam.__super__.constructor.call(this,"EmptyParam")}return extend(EmptyParam,superClass),EmptyParam}(ObliqueNS.Param),ObliqueNS.EmptyParam=EmptyParam,this.ObliqueNS=this.ObliqueNS||{},ParamParser=ObliqueNS.ParamParser,ArrayParam=ObliqueNS.ArrayParam,RangeParam=ObliqueNS.RangeParam,SingleParam=ObliqueNS.SingleParam,EmptyParam=ObliqueNS.EmptyParam,ParamCollection=function(){function ParamCollection(locationHash){var hashParam,i,len1,param,paramParser,ref;if(this.removeAll(),!this._StringIsEmpty(locationHash))for(paramParser=new ParamParser(locationHash),ref=paramParser.hashParams,i=0,len1=ref.length;len1>i;i++)hashParam=ref[i],hashParam=decodeURIComponent(hashParam),param=void 0,param=SingleParam.is(hashParam)?SingleParam.createFrom(hashParam):RangeParam.is(hashParam)?RangeParam.createFrom(hashParam):ArrayParam.is(hashParam)?ArrayParam.createFrom(hashParam):new EmptyParam,this.add(param)}return ParamCollection.prototype._StringIsEmpty=function(value){return void 0===value?!0:0===value.trim().length?!0:!1},ParamCollection.prototype.add=function(param){return this._params[param.name.toLowerCase()]=param,param},ParamCollection.prototype.addSingleParam=function(name,value){return this.add(new SingleParam(name,value))},ParamCollection.prototype.addRangeParam=function(name,min,max){return this.add(new RangeParam(name,min,max))},ParamCollection.prototype.addArrayParam=function(name,values){return this.add(new ArrayParam(name,values))},ParamCollection.prototype.remove=function(paramName){return this._params[paramName]=void 0},ParamCollection.prototype.removeAll=function(){return this._params={}},ParamCollection.prototype.getParam=function(paramName){var param;return param=this._params[paramName.toLowerCase()],void 0===param?new EmptyParam:param},ParamCollection.prototype.find=function(paramNames){var foundedParamCollection,lowerCaseParamNames,param,paramName,ref,ref1;lowerCaseParamNames=function(){var i,len1,results;for(results=[],i=0,len1=paramNames.length;len1>i;i++)param=paramNames[i],results.push(param.toLowerCase());return results}(),foundedParamCollection=new ParamCollection,ref=this._params;for(paramName in ref)param=ref[paramName],!this._isEmptyParam(param)&&(ref1=paramName.toLowerCase(),indexOf.call(lowerCaseParamNames,ref1)>=0)&&foundedParamCollection.add(param);return foundedParamCollection},ParamCollection.prototype.isEmpty=function(){return 0===this.count()?!0:!1},ParamCollection.prototype.count=function(){var count,param,paramName,ref;count=0,ref=this._params;for(paramName in ref)param=ref[paramName],this._isEmptyParam(param)||count++;return count},ParamCollection.prototype._isEmptyParam=function(param){return void 0===param?!0:param.isEmpty()},ParamCollection.prototype.getLocationHash=function(){var hash,param,paramName,ref;hash="#",ref=this._params;for(paramName in ref)param=ref[paramName],void 0!==param&&(hash+=param.getLocationHash()+"&");return 1!==hash.length&&(hash=hash.substr(0,hash.length-1)),"#"===hash&&(hash="#_"),hash},ParamCollection}(),ObliqueNS.ParamCollection=ParamCollection,this.ObliqueNS=this.ObliqueNS||{},Param=ObliqueNS.Param,ParamParser=ObliqueNS.ParamParser,RangeParam=function(superClass){function RangeParam(name1,min1,max1){if(this.name=name1,this.min=min1,this.max=max1,RangeParam.__super__.constructor.call(this,this.name),!this._isValidValue(this.min))throw new ObliqueNS.Error("Param constructor must be called with second param string");if(!this._isValidValue(this.max))throw new ObliqueNS.Error("Param constructor must be called with third param string");void 0!==this.min&&(this.min=unescape(this.min)),void 0!==this.max&&(this.max=unescape(this.max))}return extend(RangeParam,superClass),RangeParam.prototype._isValidValue=function(value){return void 0===value?!0:this._isString(value)},RangeParam.prototype.getLocationHash=function(){return this.isEmpty()?this.name:this.name+"=("+this.min+","+this.max+")"},RangeParam.prototype.isEmpty=function(){return void 0===this.min&&void 0===this.max?!0:!1},RangeParam.prototype.isInRange=function(value){return value<this.min?!1:value>this.max?!1:!0},RangeParam.is=function(strHashParam){var hashParam;return hashParam=Param.parse(strHashParam),Param.isEnclosedInChars(hashParam.value,"(",")")?!0:!1},RangeParam.createFrom=function(strHashParam){var hashParam,max,min,value;return hashParam=Param.parse(strHashParam),min=void 0,max=void 0,Param.stringIsNullOrEmpty(hashParam.value)||(value=hashParam.value.replace("(","").replace(")",""),value.trim().length>0&&(min=value.split(",")[0].trim(),max=value.split(",")[1].trim())),new RangeParam(hashParam.name,min,max)},RangeParam}(ObliqueNS.Param),ObliqueNS.RangeParam=RangeParam,this.ObliqueNS=this.ObliqueNS||{},ParamParser=ObliqueNS.ParamParser,Param=ObliqueNS.Param,SingleParam=function(superClass){function SingleParam(name1,value1){if(this.name=name1,this.value=value1,SingleParam.__super__.constructor.call(this,this.name),!this._isString(this.value))throw new ObliqueNS.Error("Param constructor must be called with second param string");void 0!==this.value&&(this.value=unescape(this.value))}return extend(SingleParam,superClass),SingleParam.prototype.getLocationHash=function(){return this.isEmpty()?this.name:this.name+"="+this.value},SingleParam.prototype.isEmpty=function(){return void 0===this.value?!0:0===this.value.trim().length?!0:!1},SingleParam.is=function(strHashParam){var hashParam,value;return hashParam=Param.parse(strHashParam),value=hashParam.value,Param.isEnclosedInChars(value,"(",")")?!1:Param.isEnclosedInChars(value,"[","]")?!1:!0},SingleParam.createFrom=function(strHashParam){var hashParam;return hashParam=Param.parse(strHashParam),new SingleParam(hashParam.name,hashParam.value)},SingleParam.prototype.valueIsEqualTo=function(value){return this.isEmpty()?!1:this.value!==value?!1:!0},SingleParam}(ObliqueNS.Param),ObliqueNS.SingleParam=SingleParam,this.ObliqueNS=this.ObliqueNS||{},Template=function(){function Template(templateContent){this.compiledTemplate=Handlebars.compile(templateContent)}return Template.prototype.renderHTML=function(model){return this.compiledTemplate(model)},Template}(),ObliqueNS.Template=Template,this.ObliqueNS=this.ObliqueNS||{},TemplateFactory=function(){function TemplateFactory(){}return Template=ObliqueNS.Template,TemplateFactory.prototype.createFromString=function(templateStr){return new Template(templateStr)},TemplateFactory.prototype.createFromDOMElement=function(element){return this.createFromString($(element).html())},TemplateFactory.prototype.createFromUrl=function(url){var errorMessage,errorStatusCode,template,templateContent;if(templateContent=void 0,errorStatusCode=200,errorMessage=void 0,jQuery.ajax({url:url,success:function(data){return templateContent=data},error:function(e){return errorStatusCode=e.status,errorMessage=e.statusCode},async:!1}),404===errorStatusCode)throw new ObliqueNS.Error("template '"+url+"' not found");if(200!==errorStatusCode)throw new ObliqueNS.Error(errorMessage);return template=this.createFromString(templateContent)},TemplateFactory}(),ObliqueNS.TemplateFactory=TemplateFactory,String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),this.ObliqueNS=this.ObliqueNS||{},DataModelVariable=ObliqueNS.DataModelVariable,DOMProcessor=function(){function DOMProcessor(){return this===window?new DOMProcessor:DOMProcessor._singletonInstance?DOMProcessor._singletonInstance:(DOMProcessor._singletonInstance=this,this._throwErrorIfJQueryIsntLoaded(),this._directiveCollection=new ObliqueNS.DirectiveCollection,this._directiveInstancesData=[],this._timedDOMObserver=this._createTimedDOMObserver(DOMProcessor.DEFAULT_INTERVAL_MS),this._memory=new ObliqueNS.Memory,this._hashChangeEventEnabled=!0,void jQuery(document).ready(function(_this){return function(){return _this._doACycle(),_this._timedDOMObserver.observe(),_this._listenToHashRouteChanges()}}(this)))}return DOMProcessor.DEFAULT_INTERVAL_MS=500,DOMProcessor.prototype.enableHashChangeEvent=function(){return this._hashChangeEventEnabled=!0},DOMProcessor.prototype.disableHashChangeEvent=function(){return this._hashChangeEventEnabled=!1},DOMProcessor.prototype._listenToHashRouteChanges=function(){return $(window).on("hashchange",function(_this){return function(){var dirData,directiveData,i,len1,ref,results;if(_this._hashChangeEventEnabled){for(ref=_this._directiveInstancesData,results=[],i=0,len1=ref.length;len1>i;i++)dirData=ref[i],directiveData=_this._createDirectiveData(dirData.domElement,dirData.jQueryElemen,dirData.model,dirData.params),results.push(dirData.instance.onHashChange?dirData.instance.onHashChange(directiveData):void 0);return results}}}(this))},DOMProcessor.prototype._ignoreHashRouteChanges=function(){return $(window).off("hashchange")},DOMProcessor.prototype._throwErrorIfJQueryIsntLoaded=function(){if(!window.jQuery)throw new Error("DOMProcessor needs jQuery to work")},DOMProcessor.prototype._createTimedDOMObserver=function(intervalInMs){var observer;return observer=new ObliqueNS.TimedDOMObserver(intervalInMs),observer.onChange(function(_this){return function(){return _this._doACycle()}}(this)),observer},DOMProcessor._isDoingACycle=!1,DOMProcessor.prototype._doACycle=function(){var e,error1;try{if(this._isDoingACycle)return;return this._isDoingACycle=!0,this._applyGlobalDirectives(),this._applyVariablesInDOM(),this._applyDirectivesInDOM(),this._callOnIntervalOnCurrentDirectives()}catch(error1){throw e=error1,this._throwError(e,"Error doing a cycle in Oblique.js: "+e.message),e}finally{this._isDoingACycle=!1}},DOMProcessor.prototype._callOnIntervalOnCurrentDirectives=function(){var directive,directiveInstanceData,i,len1,ref,results;for(ref=this._directiveInstancesData,results=[],i=0,len1=ref.length;len1>i;i++)directiveInstanceData=ref[i],directive=directiveInstanceData.instance,results.push(directive.onInterval?directive.onInterval():void 0);return results},DOMProcessor.prototype._applyVariablesInDOM=function(){return $("*[data-ob-var]").each(function(_this){return function(index,DOMElement){var obElement,scriptAttrValue;return obElement=new ObliqueNS.Element(DOMElement),scriptAttrValue=obElement.getAttributeValue("data-ob-var"),scriptAttrValue?_this._processScriptElement(obElement,scriptAttrValue):void 0}}(this))},DOMProcessor.prototype._applyGlobalDirectives=function(){var rootElement;return rootElement=new ObliqueNS.Element(document.documentElement),this._directiveCollection.each(function(_this){return function(directive){return directive.isGlobal?_this._processDirectiveElement(rootElement,directive.name):void 0}}(this))},DOMProcessor.prototype._applyDirectivesInDOM=function(){return $("*[data-ob-directive]").each(function(_this){return function(index,DOMElement){var directiveAttrValue,obElement;return obElement=new ObliqueNS.Element(DOMElement),directiveAttrValue=obElement.getAttributeValue("data-ob-directive"),directiveAttrValue?_this._processDirectiveElement(obElement,directiveAttrValue):void 0}}(this))},DOMProcessor.prototype._execJS=function(___JSScriptBlock){var Model,___dataModelVariable,___directiveModel,___variableName,___variableValue;return Model=Oblique().getModel(),eval(this._memory.localVarsScript()),___directiveModel=eval(___JSScriptBlock),___dataModelVariable=new DataModelVariable(___JSScriptBlock),___dataModelVariable.isSet&&(___variableName=___dataModelVariable.name,___variableValue=eval(___variableName),this._memory.setVar(___variableName,___variableValue),___directiveModel=___variableValue),___directiveModel},DOMProcessor.prototype._processScriptElement=function(obElement,varAttrValue){return obElement.hasFlag("data-ob-var")?void 0:(obElement.setFlag("data-ob-var"),this._execJS(varAttrValue))},DOMProcessor.prototype._processDirectiveElement=function(obElement,directiveAttrValue){var directive,directiveData,directiveInstanceData,directiveName,domElement,i,jQueryElement,len1,model,params,ref,results;for(ref=directiveAttrValue.split(","),results=[],i=0,len1=ref.length;len1>i;i++)if(directiveName=ref[i],directiveName=directiveName.trim(),!obElement.hasFlag(directiveName)){if(directive=this._directiveCollection.findByName(directiveName).callback,!directive)throw new ObliqueNS.Error("There is no "+directiveName+" directive registered");obElement.setFlag(directiveName),domElement=obElement.getDOMElement(),jQueryElement=obElement.getjQueryElement(),model=this._getDirectiveModel(obElement),params=this._getParams(obElement),directiveData=this._createDirectiveData(domElement,jQueryElement,model,params),directiveInstanceData={instance:new directive(directiveData),domElement:domElement,jQueryElement:jQueryElement,model:model,params:params},results.push(this._directiveInstancesData.push(directiveInstanceData))}return results},DOMProcessor.prototype._createDirectiveData=function(domElement,jQueryElement,model,params){var directiveData;return directiveData={domElement:domElement,jQueryElement:jQueryElement,model:model,params:params,hashParams:Oblique().getHashParams()}},DOMProcessor.prototype._getParams=function(obElement){var dataParamsExpr,e,error1;if(dataParamsExpr=obElement.getAttributeValue("data-ob-params"),!dataParamsExpr)return void 0;try{return jQuery.parseJSON(dataParamsExpr)}catch(error1){return e=error1,this._throwError(e,obElement.getHtml()+": data-ob-params parse error: "+e.message)}},DOMProcessor.prototype._getDirectiveModel=function(___obElement){var ___dataModelExpr,___directiveModel,e,error,error1,errorMsg;if(___dataModelExpr=___obElement.getAttributeValue("data-ob-model"),void 0===___dataModelExpr)return void 0;try{if(___directiveModel=this._execJS(___dataModelExpr),!___directiveModel)throw errorMsg=___obElement.getHtml()+": data-ob-model expression is undefined",error=new ObliqueError(errorMsg),this._throwError(error,errorMsg),error;return ___directiveModel}catch(error1){throw e=error1,this._throwError(e,___obElement.getHtml()+": data-ob-model expression error: "+e.message),e}},DOMProcessor.prototype._throwError=function(e,errorMessage){return Oblique.logError(e),Oblique().triggerOnError(new ObliqueNS.Error(errorMessage))},DOMProcessor.prototype.getIntervalTimeInMs=function(){return this._timedDOMObserver.getIntervalInMs()},DOMProcessor.prototype.setIntervalTimeInMs=function(newIntervalTimeInMs){if(0>=newIntervalTimeInMs)throw new ObliqueNS.Error("IntervalTime must be a positive number");return this._timedDOMObserver.destroy(),this._timedDOMObserver=this._createTimedDOMObserver(newIntervalTimeInMs),this._timedDOMObserver.observe()},DOMProcessor.prototype.registerDirective=function(directiveName,directiveConstructorFn){return this._directiveCollection.add(new ObliqueNS.Directive(directiveName,directiveConstructorFn))},DOMProcessor.prototype.registerDirectiveAsGlobal=function(directiveName,directiveConstructorFn){return this._directiveCollection.add(new ObliqueNS.Directive(directiveName,directiveConstructorFn,!0))},DOMProcessor.prototype.destroy=function(){return this._ignoreHashRouteChanges(),this._timedDOMObserver.destroy(),DOMProcessor._singletonInstance=void 0},DOMProcessor}(),ObliqueNS.DOMProcessor=DOMProcessor,this.Oblique=DOMProcessor,this.ObliqueNS=this.ObliqueNS||{},DataModelVariable=function(){function DataModelVariable(_expression){this._expression=_expression,this._firstEqualPosition=this._expression.indexOf("="),this.name=this._getVariableName(),this.isSet=this._isSet()}return DataModelVariable.prototype._getVariableName=function(){var parts,variableName;return-1===this._firstEqualPosition?this._expression:(parts=this._expression.split("="),variableName=parts[0].replace("var ","").trim(),""===variableName?void 0:variableName)},DataModelVariable.prototype._isSet=function(){var nextChar;return-1===this._firstEqualPosition?!1:(nextChar=this._expression.substr(this._firstEqualPosition+1,1),"="===nextChar?!1:!0)},DataModelVariable}(),ObliqueNS.DataModelVariable=DataModelVariable,this.ObliqueNS=this.ObliqueNS||{},Element=function(){function Element(DOMElement){this._jQueryElement=jQuery(DOMElement)}return Element.prototype.getDOMElement=function(){return this._jQueryElement.get(0)},Element.prototype.getjQueryElement=function(){return this._jQueryElement},Element.prototype.isTag=function(){return Element._isTag(this._DOMElement)},Element.prototype.matchCSSExpression=function(cssExpression){return this._jQueryElement.is(cssExpression)},Element.prototype.setFlag=function(flagName){return this._jQueryElement.data(flagName,!0)},Element.prototype.unsetFlag=function(flagName){return this._jQueryElement.removeData(flagName)},Element.prototype.hasFlag=function(flagName){return this._jQueryElement.data(flagName)},Element.prototype.hasAttribute=function(attributeName){var attrValue;return attrValue=this.getAttributeValue(attributeName),void 0===attrValue?!1:!0},Element.prototype.getAttributeValue=function(attributeName){return this._jQueryElement.attr(attributeName)},Element.prototype.eachDescendant=function(callbackOnDOMElement){return Element._traverse(this.getDOMElement(),callbackOnDOMElement)},Element._isTag=function(DOMElement){return 1===DOMElement.nodeType},Element._traverse=function(parentElement,callbackOnDOMElement){var child,currentElement,elementsToTraverse,results;for(elementsToTraverse=[],Element._isTag(parentElement)&&elementsToTraverse.push(parentElement),callbackOnDOMElement(parentElement),results=[];elementsToTraverse.length>0;)currentElement=elementsToTraverse.pop(),results.push(function(){var i,len1,ref,results1;for(ref=currentElement.children,results1=[],i=0,len1=ref.length;len1>i;i++)child=ref[i],Element._isTag(child)?(elementsToTraverse.push(child),results1.push(callbackOnDOMElement(child))):results1.push(void 0);return results1}());return results},Element.prototype.getHtml=function(){return this.getDOMElement().outerHTML},Element}(),ObliqueNS.Element=Element,this.ObliqueNS=this.ObliqueNS||{},Memory=function(){function Memory(){this._vars={}}return Memory.prototype.setVar=function(name,value){if("Model"===name)throw new ObliqueNS.Error("Can't create a variable named 'Model', is a reserved word");return this._vars[name]=value},Memory.prototype.getVar=function(name){return this._vars[name]},Memory.prototype.localVarsScript=function(){var ref,script,variableName,variableValue;script="",ref=this._vars;for(variableName in ref)hasProp.call(ref,variableName)&&(variableValue=ref[variableName],script+="var "+variableName+'=this._memory.getVar("'+variableName+'");');return script},Memory}(),ObliqueNS.Memory=Memory,this.ObliqueNS=this.ObliqueNS||{},Oblique=function(){function Oblique(){var error;if(void 0===window.jQuery)throw error=new ObliqueNS.Error("ObliqueJS needs jQuery to be loaded"),Oblique.logError(error),error;return this===window?new Oblique:Oblique._singletonInstance?Oblique._singletonInstance:(Oblique._singletonInstance=this,this.domProcessor=new ObliqueNS.DOMProcessor,this.templateFactory=new ObliqueNS.TemplateFactory,void(this._onErrorCallbacks=[]))}return Oblique.DEFAULT_INTERVAL_MS=500,Oblique.logError=function(error){return console.log("--- Init Oblique Error ---"),console.log(error.message),console.log(error.stack),console.log("--- End  Oblique Error ---")},Oblique.prototype.getIntervalTimeInMs=function(){return this.domProcessor.getIntervalTimeInMs()},Oblique.prototype.setIntervalTimeInMs=function(newIntervalTimeInMs){return this.domProcessor.setIntervalTimeInMs(newIntervalTimeInMs)},Oblique.prototype.registerDirective=function(directiveName,directiveConstructorFn){return this.domProcessor.registerDirective(directiveName,directiveConstructorFn)},Oblique.prototype.registerDirectiveAsGlobal=function(directiveName,directiveConstructorFn){return this.domProcessor.registerDirectiveAsGlobal(directiveName,directiveConstructorFn)},Oblique.prototype.enableHashChangeEvent=function(){return this.domProcessor.enableHashChangeEvent()},Oblique.prototype.disableHashChangeEvent=function(){return this.domProcessor.disableHashChangeEvent()},Oblique.prototype.destroy=function(){var e,error1;this.domProcessor.destroy();try{return delete Oblique._singletonInstance}catch(error1){return e=error1,Oblique._singletonInstance=void 0}},Oblique.prototype.setModel=function(_model){this._model=_model},Oblique.prototype.getModel=function(){return this._model},Oblique.prototype.hasModel=function(){return this._model?!0:!1},Oblique.prototype.renderHTML=function(url,model){var template;if(void 0===Handlebars)throw new ObliqueNS.Error("Oblique().renderHtml(): needs handlebarsjs loaded to render templates");return template=this.templateFactory.createFromUrl(url),template.renderHTML(model)},Oblique.prototype.onError=function(onErrorCallback){return this._onErrorCallbacks.push(onErrorCallback)},Oblique.prototype.triggerOnError=function(error){var callback,i,len1,ref,results;for(ref=this._onErrorCallbacks,results=[],i=0,len1=ref.length;len1>i;i++)callback=ref[i],results.push(callback(error));return results},Oblique.prototype.getHashParams=function(){return new ObliqueNS.ParamCollection(window.location.hash)},Oblique.prototype.setHashParams=function(paramCollection){var hash,location,newUrl,urlWithoutHash;return hash=paramCollection.getLocationHash(),location=window.location,urlWithoutHash=location.protocol+"//"+location.host+location.pathname+location.search,newUrl=urlWithoutHash+hash,window.location.replace(newUrl),window.history.replaceState(null,null,newUrl)},Oblique}(),ObliqueNS.Oblique=Oblique,this.Oblique=Oblique,this.ObliqueNS=this.ObliqueNS||{},ObliqueError=function(superClass){function ObliqueError(message){return this.message=message,this===window?new Error(this.message):void(this.name="ObliqueNS.Error")}return extend(ObliqueError,superClass),ObliqueError}(Error),ObliqueNS.Error=ObliqueError,this.ObliqueNS=this.ObliqueNS||{},TimedDOMObserver=function(){function TimedDOMObserver(intervalInMs1){this.intervalInMs=intervalInMs1,this._intervalId=void 0,this._callback=function(){}}return TimedDOMObserver.prototype.onChange=function(callback){return this._callback=callback},TimedDOMObserver.prototype.getIntervalInMs=function(){return this.intervalInMs},TimedDOMObserver.prototype.observe=function(){return this._intervalId=setInterval(function(_this){return function(){return _this._callback()}}(this),this.intervalInMs)},TimedDOMObserver.prototype.destroy=function(){return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0},TimedDOMObserver}(),ObliqueNS.TimedDOMObserver=TimedDOMObserver}).call(this);